CREATE TABLE TIER(
NUMERO INTEGER PRIMARY KEY
);
CREATE TABLE GRUPO(
ID INTEGER PRIMARY KEY,
NOMBRE TEXT,
DESCRIPCION TEXT
);

CREATE TABLE USUARIO(
ID TEXT PRIMARY KEY,
NOMBRE  TEXT ,
EXERIENCIA REAL,
TIER_ACTUAL INTEGER,
TARJETA TEXT,
FOREIGN KEY(TIER_ACTUAL) REFERENCES TIER(NUMERO)
);
CREATE TABLE RETO(
ID INTEGER PRIMARY KEY,
NOMBRE TEXT,
DESCRIPCION TEXT,
TIPO INTEGER,
NUMERO_TIPO INTEGER,
PUNTOS REAL,
TIER_ASOCIADO INTEGER,
GRUPO_ASOCIADO INTEGER,
FOREIGN KEY (TIER_ASOCIADO) REFERENCES TIER(NUMERO),
FOREIGN KEY (GRUPO_ASOCIADO) REFERENCES GRUPO(ID)
);
CREATE TABLE RETOS_USUARIO(
ID_RETO INTEGER,
ID_USUARIO INTEGER,
STATUS BOOLEAN,
PRIMARY KEY (ID_RETO, ID_USUARIO),
FOREIGN KEY (ID_RETO) REFERENCES RETO(ID),
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);


CREATE TABLE PREMIO(
ID INTEGER PRIMARY KEY,
NOMBRE TEXT,
DESCRIPCION TEXT,
TIER_ASOCIADO INTEGER,
GRUPO_ASOCIADO INTEGER,
FOREIGN KEY (TIER_ASOCIADO) REFERENCES TIER(NUMERO),
FOREIGN KEY (GRUPO_ASOCIADO) REFERENCES GRUPO(ID)
);

CREATE TABLE PREMIO_USUARIO(
ID_USUARIO INTEGER,
ID_PREMIO INTEGER,
REDIMIDO BOOLEAN,
PRIMARY KEY (ID_PREMIO, ID_USUARIO),
FOREIGN KEY (ID_PREMIO) REFERENCES PREMIO(ID),
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);
